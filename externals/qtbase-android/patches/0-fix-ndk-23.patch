diff -rupN upstream.original/configure.pri upstream.patched/configure.pri
--- upstream.original/configure.pri	2021-08-21 14:04:57.000000000 +0200
+++ upstream.patched/configure.pri	2021-08-27 14:12:30.000000000 +0200
@@ -554,14 +554,16 @@ defineTest(qtConfOutput_prepareOptions) 
             qtConfFatalError("Cannot find Android NDK." \
                              "Please use -android-ndk option to specify one.")
 
-        ndk_tc_ver = $$eval(config.input.android-toolchain-version)
-        isEmpty(ndk_tc_ver): \
-            ndk_tc_ver = 4.9
-        !exists($$ndk_root/toolchains/arm-linux-androideabi-$$ndk_tc_ver/prebuilt/*): \
-            qtConfFatalError("Cannot detect Android NDK toolchain." \
-                             "Please use -android-toolchain-version to specify it.")
-
-        ndk_tc_pfx = $$ndk_root/toolchains/arm-linux-androideabi-$$ndk_tc_ver/prebuilt
+        #ndk_tc_ver = $$eval(config.input.android-toolchain-version)
+        #isEmpty(ndk_tc_ver): \
+        #    ndk_tc_ver = 4.9
+        #!exists($$ndk_root/toolchains/arm-linux-androideabi-$$ndk_tc_ver/prebuilt/*): \
+        #    qtConfFatalError("Cannot detect Android NDK toolchain." \
+        #                     "Please use -android-toolchain-version to specify it.")
+
+        # ndk_tc_pfx = $$ndk_root/toolchains/arm-linux-androideabi-$$ndk_tc_ver/prebuilt
+        ndk_tc_ver = llvm
+        ndk_tc_pfx = $$ndk_root/toolchains/llvm/prebuilt
         ndk_host = $$eval(config.input.android-ndk-host)
         isEmpty(ndk_host): \
             ndk_host = $$getenv(ANDROID_NDK_HOST)
@@ -611,7 +613,7 @@ defineTest(qtConfOutput_prepareOptions) 
             platform = android-21
 
         isEmpty(platform): \
-            platform = android-16  ### the windows configure disagrees ...
+            platform = android-21
 
         $${currentConfig}.output.devicePro += \
             "DEFAULT_ANDROID_SDK_ROOT = $$val_escape(sdk_root)" \
diff -rupN upstream.original/mkspecs/android-clang/qmake.conf upstream.patched/mkspecs/android-clang/qmake.conf
--- upstream.original/mkspecs/android-clang/qmake.conf	2021-08-21 14:04:58.000000000 +0200
+++ upstream.patched/mkspecs/android-clang/qmake.conf	2021-08-28 00:40:42.000000000 +0200
@@ -12,33 +12,38 @@ include(../common/android-base-head.conf
 
 NDK_LLVM_PATH = $$NDK_ROOT/toolchains/llvm/prebuilt/$$NDK_HOST
 QMAKE_CC      = $$NDK_LLVM_PATH/bin/clang
+#QMAKE_CC      = $$NDK_LLVM_PATH/bin/armv7a-linux-androideabi21-clang
 QMAKE_CXX     = $$NDK_LLVM_PATH/bin/clang++
+#QMAKE_CXX      = $$NDK_LLVM_PATH/bin/armv7a-linux-androideabi21-clang++
+
 
 equals(ANDROID_TARGET_ARCH, armeabi-v7a): \
     QMAKE_CFLAGS += -target armv7-none-linux-androideabi
-else: equals(ANDROID_TARGET_ARCH, armeabi): \
-    QMAKE_CFLAGS += -target armv5te-none-linux-androideabi
 else: equals(ANDROID_TARGET_ARCH, arm64-v8a): \
     QMAKE_CFLAGS += -target aarch64-none-linux-android
 else: equals(ANDROID_TARGET_ARCH, x86): \
     QMAKE_CFLAGS += -target i686-none-linux-android -mstackrealign
 else: equals(ANDROID_TARGET_ARCH, x86_64): \
     QMAKE_CFLAGS += -target x86_64-none-linux-android
-else: equals(ANDROID_TARGET_ARCH, mips): \
-    QMAKE_CFLAGS += -target mipsel-none-linux-android
-else: equals(ANDROID_TARGET_ARCH, mips64): \
-    QMAKE_CFLAGS += -target mips64el-none-linux-android
-
-QMAKE_CFLAGS += -gcc-toolchain $$NDK_TOOLCHAIN_PATH -fno-limit-debug-info
-
-QMAKE_LINK    = $$QMAKE_CXX $$QMAKE_CFLAGS -Wl,--exclude-libs,libgcc.a -Wl,--exclude-libs,libatomic.a -nostdlib++
-equals(ANDROID_TARGET_ARCH, armeabi-v7a): QMAKE_LINK += -Wl,--exclude-libs,libunwind.a
-
-QMAKE_CFLAGS += -DANDROID_HAS_WSTRING --sysroot=$$NDK_ROOT/sysroot \
-                -isystem $$NDK_ROOT/sysroot/usr/include/$$NDK_TOOLS_PREFIX \
-                -isystem $$NDK_ROOT/sources/cxx-stl/llvm-libc++/include \
-                -isystem $$NDK_ROOT/sources/android/support/include \
-                -isystem $$NDK_ROOT/sources/cxx-stl/llvm-libc++abi/include
+
+# QMAKE_CFLAGS += -gcc-toolchain $$NDK_TOOLCHAIN_PATH -fno-limit-debug-info
+QMAKE_CFLAGS += -fno-limit-debug-info
+
+QMAKE_LINK    = $$QMAKE_CXX $$QMAKE_CFLAGS -Wl,--exclude-libs,libgcc.a -Wl,--exclude-libs,libatomic.a \
+    -nostdlib++ -nostdlib \
+    -L$$NDK_LLVM_PATH/lib64/clang/12.0.5/lib/linux/ -lclang_rt.builtins-$$ANDROID_ARCHITECTURE-android \
+    -L$$NDK_LLVM_PATH/sysroot/usr/lib/$$NDK_TOOLCHAIN_PREFIX/$$ANDROID_PLATFORM_CODE
+    #-L$$NDK_ROOT/toolchains/llvm/prebuilt/darwin-x86_64/lib64/clang/12.0.5/lib/linux/
+    #-L$$NDK_ROOT/toolchains/llvm/prebuilt/darwin-x86_64/sysroot/usr/lib/arm-linux-androideabi/21/ \
+
+# equals(ANDROID_TARGET_ARCH, armeabi-v7a): QMAKE_LINK += -Wl,--exclude-libs,libunwind.a
+
+# /Users/victorshcherb/programs/android-ndk-r23//toolchains/llvm/prebuilt/darwin-x86_64/sysroot/usr/lib/arm-linux-androideabi/18/
+# QMAKE_CFLAGS += -DANDROID_HAS_WSTRING --sysroot=$$NDK_ROOT/sysroot \
+#                 -isystem $$NDK_ROOT/sysroot/usr/include/$$NDK_TOOLS_PREFIX \
+#                 -isystem $$NDK_ROOT/sources/cxx-stl/llvm-libc++/include \
+#                 -isystem $$NDK_ROOT/sources/android/support/include \
+#                 -isystem $$NDK_ROOT/sources/cxx-stl/llvm-libc++abi/include
 
 ANDROID_SOURCES_CXX_STL_LIBDIR = $$NDK_ROOT/sources/cxx-stl/llvm-libc++/libs/$$ANDROID_TARGET_ARCH
 
@@ -47,9 +52,10 @@ ANDROID_STDCPP_PATH = $$ANDROID_SOURCES_
 ANDROID_USE_LLVM = true
 
 exists($$ANDROID_SOURCES_CXX_STL_LIBDIR/libc++.so): \
-    ANDROID_CXX_STL_LIBS = -lc++
+    ANDROID_CXX_STL_LIBS = -lc++ -lunwind
 else: \
-    ANDROID_CXX_STL_LIBS = $$ANDROID_SOURCES_CXX_STL_LIBDIR/libc++.so.$$replace(ANDROID_PLATFORM, "android-", "")
+    #ANDROID_CXX_STL_LIBS = -l $$ANDROID_SOURCES_CXX_STL_LIBDIR/libc++.so.$$replace(ANDROID_PLATFORM, "android-", "")
+    ANDROID_CXX_STL_LIBS = -lc++ -lunwind
 
 QMAKE_CFLAGS_OPTIMIZE_SIZE = -Oz
 
diff -rupN upstream.original/mkspecs/common/android-base-tail.conf upstream.patched/mkspecs/common/android-base-tail.conf
--- upstream.original/mkspecs/common/android-base-tail.conf	2021-08-21 14:04:58.000000000 +0200
+++ upstream.patched/mkspecs/common/android-base-tail.conf	2021-08-27 15:24:04.000000000 +0200
@@ -68,8 +68,8 @@ QMAKE_INCDIR_OPENGL     =
 QMAKE_LIBDIR_OPENGL     =
 
 QMAKE_LINK_SHLIB        = $$QMAKE_LINK
-QMAKE_LFLAGS            = --sysroot=$$ANDROID_PLATFORM_ROOT_PATH
-equals(ANDROID_TARGET_ARCH, x86_64) QMAKE_LFLAGS += -L$$ANDROID_PLATFORM_ROOT_PATH/usr/lib64
+#QMAKE_LFLAGS            = --sysroot=$$ANDROID_PLATFORM_ROOT_PATH
+#equals(ANDROID_TARGET_ARCH, x86_64) QMAKE_LFLAGS += -L$$ANDROID_PLATFORM_ROOT_PATH/usr/lib64
 QMAKE_LFLAGS_APP        = -Wl,--no-undefined -Wl,-z,noexecstack -shared
 QMAKE_LFLAGS_SHLIB      = -Wl,--no-undefined -Wl,-z,noexecstack -shared
 QMAKE_LFLAGS_PLUGIN     = $$QMAKE_LFLAGS_SHLIB
diff -rupN upstream.original/mkspecs/common/android-base-head.conf upstream.patched/mkspecs/common/android-base-head.conf
--- upstream.original/mkspecs/common/android-base-head.conf	2021-08-21 14:04:58.000000000 +0200
+++ upstream.patched/mkspecs/common/android-base-head.conf	2021-08-28 15:23:22.000000000 +0200
@@ -11,43 +11,31 @@ isEmpty(NDK_HOST): NDK_HOST = $$DEFAULT_
 
 ANDROID_PLATFORM = $$(ANDROID_NDK_PLATFORM)
 isEmpty(ANDROID_PLATFORM): ANDROID_PLATFORM = $$DEFAULT_ANDROID_PLATFORM
+ANDROID_PLATFORM_CODE=$$replace(ANDROID_PLATFORM, "android-", "")
+
 
 ANDROID_TARGET_ARCH = $$(ANDROID_TARGET_ARCH)
 isEmpty(ANDROID_TARGET_ARCH): ANDROID_TARGET_ARCH = $$DEFAULT_ANDROID_TARGET_ARCH
 
 NDK_TOOLCHAIN_PREFIX = $$(ANDROID_NDK_TOOLCHAIN_PREFIX)
 isEmpty(NDK_TOOLCHAIN_PREFIX) {
-    equals(ANDROID_TARGET_ARCH, x86): NDK_TOOLCHAIN_PREFIX = x86
-    else: equals(ANDROID_TARGET_ARCH, x86_64): NDK_TOOLCHAIN_PREFIX = x86_64
-    else: equals(ANDROID_TARGET_ARCH, mips): NDK_TOOLCHAIN_PREFIX = mipsel-linux-android
-    else: equals(ANDROID_TARGET_ARCH, mips64): NDK_TOOLCHAIN_PREFIX = mips64el-linux-android
+    equals(ANDROID_TARGET_ARCH, x86): NDK_TOOLCHAIN_PREFIX = i686-linux-android
+    else: equals(ANDROID_TARGET_ARCH, x86_64): NDK_TOOLCHAIN_PREFIX = x86_64-linux-android
     else: equals(ANDROID_TARGET_ARCH, arm64-v8a): NDK_TOOLCHAIN_PREFIX = aarch64-linux-android
     else: NDK_TOOLCHAIN_PREFIX = arm-linux-androideabi
 }
 
-NDK_TOOLS_PREFIX = $$(ANDROID_NDK_TOOLS_PREFIX)
-isEmpty(NDK_TOOLS_PREFIX) {
-    equals(ANDROID_TARGET_ARCH, x86): NDK_TOOLS_PREFIX = i686-linux-android
-    else: equals(ANDROID_TARGET_ARCH, x86_64): NDK_TOOLS_PREFIX = x86_64-linux-android
-    else: equals(ANDROID_TARGET_ARCH, mips): NDK_TOOLS_PREFIX = mipsel-linux-android
-    else: equals(ANDROID_TARGET_ARCH, mips64): NDK_TOOLS_PREFIX = mips64el-linux-android
-    else: equals(ANDROID_TARGET_ARCH, arm64-v8a): NDK_TOOLS_PREFIX = aarch64-linux-android
-    else: NDK_TOOLS_PREFIX = arm-linux-androideabi
-}
-
 NDK_TOOLCHAIN_VERSION = $$(ANDROID_NDK_TOOLCHAIN_VERSION)
 isEmpty(NDK_TOOLCHAIN_VERSION): NDK_TOOLCHAIN_VERSION = $$DEFAULT_ANDROID_NDK_TOOLCHAIN_VERSION
 
-equals(ANDROID_TARGET_ARCH, x86): ANDROID_ARCHITECTURE = x86
+equals(ANDROID_TARGET_ARCH, x86): ANDROID_ARCHITECTURE = i686
 else: equals(ANDROID_TARGET_ARCH, x86_64): ANDROID_ARCHITECTURE = x86_64
-else: equals(ANDROID_TARGET_ARCH, mips): ANDROID_ARCHITECTURE = mips
-else: equals(ANDROID_TARGET_ARCH, mips64): ANDROID_ARCHITECTURE = mips64
-else: equals(ANDROID_TARGET_ARCH, arm64-v8a): ANDROID_ARCHITECTURE = arm64
+else: equals(ANDROID_TARGET_ARCH, arm64-v8a): ANDROID_ARCHITECTURE = aarch64
 else: ANDROID_ARCHITECTURE = arm
 
 !equals(NDK_TOOLCHAIN_VERSION, 4.4.3): ANDROID_CXXSTL_SUFFIX = -$$NDK_TOOLCHAIN_VERSION
 
-NDK_TOOLCHAIN = $$NDK_TOOLCHAIN_PREFIX-$$NDK_TOOLCHAIN_VERSION
+NDK_TOOLCHAIN = llvm
 NDK_TOOLCHAIN_PATH = $$NDK_ROOT/toolchains/$$NDK_TOOLCHAIN/prebuilt/$$NDK_HOST
 
 
@@ -64,11 +52,11 @@ isEmpty(ANDROID_SDK_BUILD_TOOLS_REVISION
 }
 
 CONFIG += $$ANDROID_PLATFORM
-QMAKE_CFLAGS = -D__ANDROID_API__=$$replace(ANDROID_PLATFORM, "android-", "")
+QMAKE_CFLAGS = -D__ANDROID_API__=$$ANDROID_PLATFORM_CODE
 
-ANDROID_PLATFORM_ROOT_PATH  = $$NDK_ROOT/platforms/$$ANDROID_PLATFORM/arch-$$ANDROID_ARCHITECTURE/
+# ANDROID_PLATFORM_ROOT_PATH  = $$NDK_ROOT/platforms/$$ANDROID_PLATFORM/arch-$$ANDROID_ARCHITECTURE/
 
-CROSS_COMPILE = $$NDK_TOOLCHAIN_PATH/bin/$$NDK_TOOLS_PREFIX-
+CROSS_COMPILE = $$NDK_TOOLCHAIN_PATH/bin/llvm-
 
 QMAKE_PCH_OUTPUT_EXT    = .gch
 
diff -rupN upstream.original/mkspecs/features/android/android_deployment_settings.prf upstream.patched/mkspecs/features/android/android_deployment_settings.prf
--- upstream.original/mkspecs/features/android/android_deployment_settings.prf	2021-08-21 14:04:58.000000000 +0200
+++ upstream.patched/mkspecs/features/android/android_deployment_settings.prf	2021-08-28 15:13:36.000000000 +0200
@@ -23,15 +23,13 @@ contains(TEMPLATE, ".*app"):!build_pass:
     } else {
         NDK_TOOLCHAIN_PREFIX = $$(ANDROID_NDK_TOOLCHAIN_PREFIX)
         isEmpty(NDK_TOOLCHAIN_PREFIX) {
-            equals(ANDROID_TARGET_ARCH, x86): NDK_TOOLCHAIN_PREFIX = x86
-            else: equals(ANDROID_TARGET_ARCH, x86_64): NDK_TOOLCHAIN_PREFIX = x86_64
-            else: equals(ANDROID_TARGET_ARCH, mips): NDK_TOOLCHAIN_PREFIX = mipsel-linux-android
-            else: equals(ANDROID_TARGET_ARCH, mips64): NDK_TOOLCHAIN_PREFIX = mips64el-linux-android
+            equals(ANDROID_TARGET_ARCH, x86): NDK_TOOLCHAIN_PREFIX = i686-linux-android
+            else: equals(ANDROID_TARGET_ARCH, x86_64): NDK_TOOLCHAIN_PREFIX = x86_64-linux-android  x
             else: equals(ANDROID_TARGET_ARCH, arm64-v8a): NDK_TOOLCHAIN_PREFIX = aarch64-linux-android
             else: NDK_TOOLCHAIN_PREFIX = arm-linux-androideabi
         }
         FILE_CONTENT += "   \"toolchain-prefix\": $$emitString($$NDK_TOOLCHAIN_PREFIX),"
-        FILE_CONTENT += "   \"tool-prefix\": $$emitString($$NDK_TOOLS_PREFIX),"
+        FILE_CONTENT += "   \"tool-prefix\": $$emitString($$NDK_TOOLCHAIN_PREFIX),"
     }
 
     NDK_TOOLCHAIN_VERSION = $$(ANDROID_NDK_TOOLCHAIN_VERSION)
